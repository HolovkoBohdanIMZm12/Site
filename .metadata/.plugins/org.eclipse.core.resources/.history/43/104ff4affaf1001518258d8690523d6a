package com.Sck;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.Socket;

public class Implementation 
{
	
	/*
	   DataInputStream and DataOutputStream allows you to record and read data primitive types.
	   
	   After you create a Socket object, you can take the input and output streams of the socket. 
	   Input stream will allow you to read from the socket, 
	   and gives the output stream to write to the socket.	   
	   
	 */
	
	public void ping(Socket socket) throws IOException 
	{
		DataInputStream DinStream = new DataInputStream(socket.getInputStream());
		DataOutputStream DouStream = new DataOutputStream(socket.getOutputStream());
		
		DouStream.writeInt(1);
		DouStream.writeByte(1);
		
		byte array[] = new byte[DinStream.readInt()]; 
		DinStream.readFully(array);
		
		if(array.length == 1 && array[0] == 2) 
			System.out.println("Ping successf");
		else 
			System.out.println("Ping not success!!");
	}
	
	public void echo(Socket socket, String str) throws IOException 
	{
		DataInputStream DinStream = new DataInputStream(socket.getInputStream());
		DataOutputStream DouStream = new DataOutputStream(socket.getOutputStream());
		
		byte[] BytesOfString = str.getBytes();
		DouStream.writeInt(BytesOfString.length+1);
		DouStream.writeByte(3);
		DouStream.write(BytesOfString);
		
		byte array[] = new byte[DinStream.readInt()]; 
		DinStream.readFully(array);
		
		if(array.length > 1) 
		{
			String str_received = new String(array, 0, array.length);
			System.out.println(str_received);
		}
		else 
			System.out.println("Error " + array[0]);
	}
}
